!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="./lib",r(r.s=4)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(5))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2);!function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(3)),e.default=n.IDB},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(7),s=r(1),c=r(0),u=function(){function t(t,e,r){var n=this;this.objectStoresMap={},this.iterateOverObjectStores=function(t){return Promise.all(Object.values(n.objectStoresMap).map(t))},this.delete=function(){return o(n,void 0,void 0,(function(){var t,e,r;return i(this,(function(n){return e=(t=this).dataBaseName,r=t.db,[2,a.deleteDB(e,{blocked:function(){r.then((function(t){return t.close()}))}})]}))}))},this.dataBaseName=t,this.db=e,this.objectStoresMap=r}return Object.defineProperty(t.prototype,"objectStores",{get:function(){var t=this;return n(n({},this.objectStoresMap),{methods:{iterate:function(e){return function(e){return t.iterateOverObjectStores(e)}(e)}}})},enumerable:!0,configurable:!0}),t.objectStoreDictionaryCreator=function(t){var e="function"==typeof t?t():t,r={};return Array.isArray(e)?e.forEach((function(t){r[t.name]=t})):r[e.name]=e,r},t.init=function(e,r,n){return o(void 0,void 0,void 0,(function(){var o,u,f;return i(this,(function(i){if(!e)throw new Error(c.IDBErrors.noDatabaseName);if(!n||Array.isArray(n)&&!n.length)throw new Error(c.IDBErrors.noObjectStore);o=t.objectStoreDictionaryCreator(n),u={};try{return f=a.openDB(e,r,{upgrade:function(t){Object.values(o).forEach((function(e){var r=e.name,n=e.options;t.objectStoreNames.contains(r)||t.createObjectStore(r,n)})),Object.values(t.objectStoreNames).forEach((function(e){o[e]||t.deleteObjectStore(e)}))}}),Object.values(o).forEach((function(t){var e=t.name,r=t.options;u[t.name]=new s.IDBObject(f,{name:e,options:r})})),[2,new t(e,f,u)]}catch(t){throw new Error(c.IDBORM+": "+t)}return[2]}))}))},t}();e.IDB=u},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),a=function(t,e){var r=this,a=e.name,s=e.options;this.put=function(t,e){var n=r,o=n.db,a=n.storeName;return o.then((function(r){var n=r.transaction(a,"readwrite");return n.objectStore(a).put(t,e),n.done})).then((function(){return t})).catch((function(r){throw new Error(i.IDBORM+": "+a+".put("+t+(e?", "+e:"")+"): "+r)}))},this.get=function(t){return n(r,void 0,void 0,(function(){var e,r,n;return o(this,(function(o){return r=(e=this).db,n=e.storeName,[2,r.then((function(e){return e.transaction(n,"readwrite").objectStore(n).get(t)})).catch((function(e){throw new Error(i.IDBORM+": "+n+".get("+t+"): "+e)}))]}))}))},this.delete=function(t){return n(r,void 0,void 0,(function(){var e,r,a,s=this;return o(this,(function(c){return r=(e=this).db,a=e.storeName,[2,r.then((function(e){return n(s,void 0,void 0,(function(){var r;return o(this,(function(n){return(r=e.transaction(a,"readwrite")).objectStore(a).delete(t),[2,r.done]}))}))})).catch((function(e){throw new Error(i.IDBORM+": "+a+".get("+t+"): "+e)}))]}))}))},this.keys=function(){return n(r,void 0,void 0,(function(){var t,e,r,a=this;return o(this,(function(s){return e=(t=this).db,r=t.storeName,[2,e.then((function(t){return n(a,void 0,void 0,(function(){return o(this,(function(e){return[2,t.transaction(r,"readwrite").objectStore(r).getAllKeys()]}))}))})).catch((function(t){throw new Error(i.IDBORM+": "+r+".keys(): "+t)}))]}))}))},this.values=function(){var t=r,e=t.db,a=t.storeName;return e.then((function(t){return n(r,void 0,void 0,(function(){return o(this,(function(e){return[2,t.transaction(a,"readwrite").objectStore(a).getAll()]}))}))})).catch((function(t){throw new Error(i.IDBORM+": "+a+".values(): "+t)}))},this.entries=function(){return n(r,void 0,void 0,(function(){var t,e,r,n;return o(this,(function(o){switch(o.label){case 0:t=this.storeName,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Promise.all([this.keys(),this.values()])];case 2:return e=o.sent(),[2,(null===(n=e)||void 0===n?void 0:n[0].map((function(t,r){var n;return[t,null===(n=e)||void 0===n?void 0:n[1][r]]})))||[]];case 3:throw r=o.sent(),new Error(i.IDBORM+": "+t+".entries(): "+r);case 4:return[2]}}))}))},this.clear=function(){return n(r,void 0,void 0,(function(){var t,e,r;return o(this,(function(n){return e=(t=this).db,r=t.storeName,[2,e.then((function(t){var e=t.transaction(r,"readwrite");return e.objectStore(r).clear(),e.done})).catch((function(t){throw new Error(i.IDBORM+": "+r+".clear(): "+t)}))]}))}))},this.iterate=function(t){return n(r,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return[4,(0,this.entries)()];case 1:return e=r.sent(),[2,Promise.all(e.map(t))]}}))}))},this.db=t,this.storeName=a,this.storeOptions=s};e.IDBObject=a},function(t,e,r){r(1),r(2),r(3),t.exports=r(6)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IDBORM="idborm",e.IDBErrors={noDatabaseName:e.IDBORM+": dataBaseName is required.",noObjectStore:e.IDBORM+": objectStore(s) is not provided."}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=function(){function t(t){var e=this;if(this.shouldUpdateStores={},this.getIdbormStorageCurrentDb=function(t){var r,n,o,i=e,a=i.idbormStorage,s=i.dataBaseName;return t.objectStores&&!t.version?(null===(r=a[s])||void 0===r?void 0:r.objectStores)||{}:t.version&&!t.objectStores?null===(n=a[s])||void 0===n?void 0:n.version:null===(o=a)||void 0===o?void 0:o[s]},this.deleteDbVersion=function(){var t=e,r=t.idbormStorage;return delete r[t.dataBaseName],e.localStorage.setItem(o.IDBORM,JSON.stringify(n({},r)))},!window.localStorage||!window.indexedDB||!JSON)throw new Error(o.IDBErrors.noAccessToRequireStuff);this.dataBaseName=t,this.localStorage=window.localStorage,this.idbormStorage||this.localStorage.setItem(o.IDBORM,JSON.stringify({}))}return Object.defineProperty(t.prototype,"idbormStorage",{get:function(){return JSON.parse(this.localStorage.getItem(o.IDBORM))},enumerable:!0,configurable:!0}),t.prototype.incDbVersion=function(t){var e,r,i=this,a=this.dataBaseName,s=this.idbormStorage,c=this.getIdbormStorageCurrentDb,u=this.localStorage;this.shouldUpdateStores={};var f=c({objectStores:!0});return t?(Object.entries(t).forEach((function(t){var e=t[0],r=t[1];f[e]&&JSON.stringify(f[e])!==JSON.stringify(r)&&(i.shouldUpdateStores[e]=r)})),u.setItem(o.IDBORM,JSON.stringify(n(n({},s),((e={})[a]={objectStores:t,version:(c({version:!0})||0)+1},e))))):u.setItem(o.IDBORM,JSON.stringify(n(n({},s),((r={})[a]={objectStores:c({objectStores:!0}),version:c({version:!0})+1},r)))),c({version:!0})},t}();e.IDBVersionController=i},function(t,e,r){"use strict";r.r(e);let n,o;const i=new WeakMap,a=new WeakMap,s=new WeakMap,c=new WeakMap,u=new WeakMap;let f={get(t,e,r){if(t instanceof IDBTransaction){if("done"===e)return a.get(t);if("objectStoreNames"===e)return t.objectStoreNames||s.get(t);if("store"===e)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return h(t[e])},set:(t,e,r)=>(t[e]=r,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function l(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(v(this),e),h(i.get(this))}:function(...e){return h(t.apply(v(this),e))}:function(e,...r){const n=t.call(v(this),e,...r);return s.set(n,e.sort?e.sort():[e]),h(n)}}function d(t){return"function"==typeof t?l(t):(t instanceof IDBTransaction&&function(t){if(a.has(t))return;const e=new Promise((e,r)=>{const n=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),n()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});a.set(t,e)}(t),e=t,(n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(t,f):t);var e}function h(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,r)=>{const n=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e(h(t.result)),n()},i=()=>{r(t.error),n()};t.addEventListener("success",o),t.addEventListener("error",i)});return e.then(e=>{e instanceof IDBCursor&&i.set(e,t)}).catch(()=>{}),u.set(e,t),e}(t);if(c.has(t))return c.get(t);const e=d(t);return e!==t&&(c.set(t,e),u.set(e,t)),e}const v=t=>u.get(t);function b(t,e,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),s=h(a);return n&&a.addEventListener("upgradeneeded",t=>{n(h(a.result),t.oldVersion,t.newVersion,h(a.transaction))}),r&&a.addEventListener("blocked",()=>r()),i&&a.addEventListener("close",()=>i()),o&&s.then(t=>t.addEventListener("versionchange",o)).catch(()=>{}),s}function p(t,{blocked:e}={}){const r=indexedDB.deleteDatabase(t);return e&&r.addEventListener("blocked",()=>e()),h(r).then(()=>{})}r.d(e,"deleteDB",(function(){return p})),r.d(e,"openDB",(function(){return b})),r.d(e,"unwrap",(function(){return v})),r.d(e,"wrap",(function(){return h}));const y=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],m=new Map;function g(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(m.get(e))return m.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,o=w.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!o&&!y.includes(r))return;const i=async function(t,...e){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;n&&(a=a.index(e.shift()));const s=a[r](...e);return o&&await i.done,s};return m.set(e,i),i}f=(t=>({...t,get:(e,r,n)=>g(e,r)||t.get(e,r,n),has:(e,r)=>!!g(e,r)||t.has(e,r)}))(f)}]);